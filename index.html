<!DOCTYPE html>
<html>
    <head>
        <title>360 Photo Viewer</title>

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes"> <!-- Fullscreen Landscape on iOS -->

        <meta name="keywords" content="CornellTech, 360 Photo, Product Studio" />


        <meta property="og:title" content="360 Photo Viewer" />
        <meta property="og:type" content="website" />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="css/main.css">
        <script src="js/build.js"></script>
        <script>
        registerAframeClickDragComponent(window.AFRAME);
        </script>
        <script src="https://aframe.io/releases/0.2.0/aframe.min.js"></script>
        <script src="https://rawgit.com/IdeaSpaceVR/aframe-ui-modal-component/master/dist/aframe-ui-modal-component.min.js"></script>
        <script src="js/isvr_photosphere_menu.js"></script>
        <script src="js/isvr_photosphere_menu_thumb.js"></script>
        <script src="js/isvr_photosphere_menu_navigation.js"></script>


    </head>
    
    <body>

        <div id="menubar" class="menubar">
            <a><img id="menuIcon" src="img/menuIcon.png" alt="menu"></a>
        </div>
        


        <a-scene inspector="url: https://aframe.io/releases/0.3.0/aframe-inspector.min.js">
            <a-assets>
                <img id="img-photosphere-0" src="img/park1.jpg">
                <img id="respondmenu" src="img/menu-bg2.png"> 
                <img id="currentmenu" src="img/menu2.png"> 
                <!-- <img id="exploremenu" src="img/exploretab.png"> -->
                <img id="exploremenu" src="img/exploremenu-bg.png">
                <img id="commentmenu" src="img/menu3.png">
                <img id="menuIcon" src="img/menuIcon.png"> 
                <img src="img/pic1.jpg" id="img-photosphere-1">
                <img src="img/pic2.jpg" id="img-photosphere-2">
                <img src="img/pic3.jpg" id="img-photosphere-3">
                <img id="img-photosphere-1-thumb" src="img/thumbnail1.png"> 
                <img id="img-photosphere-2-thumb" src="img/thumbnail2.png"> 
                <img id="img-photosphere-3-thumb" src="img/thumbnail3.png">  
                <img src="img/emoji/emoji1.png" id="emoji1">
                <img src="img/emoji/emoji2.png" id="emoji2">
                <img src="img/emoji/emoji3.png" id="emoji3">
                <img src="img/emoji/emoji4.png" id="emoji4">
                <img src="img/emoji/emoji5.png" id="emoji5"> 
                <img src="img/emoji/emoji6.png" id="emoji6"> 
                <img id="closebutton" src="img/close.png">

            </a-assets>   

            <a-entity id="scene1" position="0 0 0" visible="false">
                
                <a-curvedimage id="currentmenu" position="-5 1 0" height="5" width="3" src="#currentmenu" theta-length="80" rotation="0 -180 0"></a-curvedimage>
                <!-- menu bar for exploring other photos -->
                <a-entity data-current-page="1" isvr-photosphere-menu id="photosphere-menu" visible="false">
                    <a-entity isvr-photosphere-menu-navigation id="menu-arrow-up" position="0 1.5 0" visible="false">
                    <a-plane position="-0.07 0 0" rotation="0 0 -45" width="0.10" height="0.3" color="#5b00f4"></a-plane>
                    <a-plane position="0.07 0 0" rotation="0 0 45" width="0.10" height="0.3" color="#5b00f4"></a-plane>
                    </a-entity>

                     <!-- <a-image isvr-photosphere-menu-thumb class="img-photosphere-thumb" src="#exploremenu" width="5" height="1" position="0 4.7 0"></a-image>   -->     
                     <a-image isvr-photosphere-menu-thumb class="img-photosphere-thumb" src="#exploremenu" width="8" height="12" position="0 1 -2"></a-image>   
                    <a-image data-image-id="1" isvr-photosphere-menu-thumb class="img-photosphere-thumb" src="#img-photosphere-1-thumb" width="5" height="2" position="0 2.8 -1">
                        <a-animation attribute="position" begin="mouseenter" from="0 2.9 -1" to="0 2.9 0.5" dur="400"></a-animation>
                        <a-animation attribute="position" begin="mouseleave" from="0 2.9 0.5" to="0 2.9 -1" dur="400"></a-animation>
                        <a-animation attribute="material.opacity" begin="fade" to="1"></a-animation>
                    </a-image>
                             
                    <a-image data-image-id="2" isvr-photosphere-menu-thumb class="img-photosphere-thumb" src="#img-photosphere-2-thumb" width="5" height="2" position="0 0 -1">
                        <a-animation attribute="position" begin="mouseenter" from="0 0 -1" to="0 0 0.5" dur="400"></a-animation>
                        <a-animation attribute="position" begin="mouseleave" from="0 0 0.5" to="0 0 -1" dur="400"></a-animation>
                        <a-animation attribute="material.opacity" begin="fade" to="1"></a-animation>
                    </a-image>
                             
                    <a-image data-image-id="3" isvr-photosphere-menu-thumb class="img-photosphere-thumb" src="#img-photosphere-3-thumb" width="5" height="2" position="0 -2.8 -1">
                        <a-animation attribute="position" begin="mouseenter" from="0 -2.8 -1" to="0 -2.8 0.5" dur="400"></a-animation>
                        <a-animation attribute="position" begin="mouseleave" from="0 -2.8 0.5" to="0 -2.8 -1" dur="400"></a-animation>
                        <a-animation attribute="material.opacity" begin="fade" to="1"></a-animation>
                    </a-image>
                             
                    <a-entity isvr-photosphere-menu-navigation="url:https://www.ideaspacevr.org/webvr-photosphere-viewer-equirectangular-images/field-data?key=images_upload&chunk-size=3&page=2" id="menu-arrow-down" position="0 -4.2 -1" visible=" true ">
                    <a-plane position="-0.07 0 0" rotation="0 0 45" width="0.10" height="0.3" color="#919191"></a-plane>
                    <a-plane position="0.07 0 0" rotation="0 0 -45" width="0.10" height="0.3" color="#919191"></a-plane>
                    </a-entity>
                </a-entity>

                <!-- For comments and annotation -->
                <a-curvedimage id="respond" position="3.5 1.5 0" height="5" width="3" radius="2" theta-length="80" src="#commentmenu" rotation="0 60 0"></a-curvedimage>

            </a-entity>
            
            

            <a-entity id="stickers" visible="false">
                <a-image id="stickertmenu" position="0.4 1.5 0" height="5" width="3" src="#respondmenu"></a-image>
                <a-image click-drag position="-0.2 2.5 1" radius="0.5" height="0.5" width="0.5" src="#emoji1"></a-image>
                <a-image click-drag position="0.8 2.5 1" radius="0.5" height="0.5" width="0.5" src="#emoji2"></a-image>
                <a-image click-drag position="-0.2 1.5 1" radius="0.5" height="0.5" width="0.5" src="#emoji3"></a-image>
                <a-image click-drag position="0.8 1.5 1" radius="0.5" height="0.5" width="0.5" src="#emoji4"></a-image>
                <a-image click-drag position="-0.2 0.5 1" radius="0.5" height="0.5" width="0.5" src="#emoji5"></a-image>
                <a-image click-drag position="0.8 0.5 1" radius="0.5" height="0.5" width="0.5" src="#emoji6"></a-image>
                <a-image id="closemenu" position="0.3 -1 1" radius="0.5" height="0.5" width="0.5" src="#closebutton"></a-image>
            </a-entity>

           <!--  </a-entity>
            <a-entity>
                <a-camera id="camera" position="0 0 0" 
                    look-controls="enabled: true">   
                <a-entity
                    cursor="fuse: raycaster; maxDistance: 500; timeout: 3000;"
                    id="cursor"
                    position="0 0 -0.99"
                    geometry="primitive: ring; radiusOuter: 0.05; radiusInner: 0.02;"
                    material="color: red; shader: flat;"
                    visible="true"
                    raycaster="far: 20; interval: 1000; objects: .clickable">
                </a-entity>
                </a-camera>
            </a-entity> -->
           

            <a-entity position="0 1.8 5">
            <a-entity
                id="camera" 
                camera="far: 10000; fov: 80; near: 0.5;"
                look-controls="enabled: true">
                <a-entity
                    cursor="fuse: false; maxDistance: 500; timeout: 3000;"
                    id="cursor"
                    position="0 0 -3.4"
                    geometry="primitive: ring; radiusOuter: 0.10; radiusInner: 0.05;"
                    material="color: red; shader: flat;"
                    visible="true">
                </a-entity>
            </a-entity>
        </a-entity>


             <a-sky geometry="primitive:sphere;radius:5000;segmentsWidth:64;segmentsHeight:64"
            material="shader:flat;color:#ffffff;fog:false; src:#img-photosphere-0 "
            scale="-1 1 1" id="photosphere"></a-sky>

        </a-scene>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script>
            //show comments
            $(document).ready(function(){
                $('.hideshowcomment').on('click', function(event) {        
                    $('#messaging').toggle('hide');
                });
            });

            //display current user info
            $(document).ready(function(){
                $('#menubar').on('click', function(event) {        
                    $('#reactions').toggle('hide');
                    $('#currentuser').toggle('hide');
                });
            });

            //show emoji
            var box = document.querySelector( '#respond' );
            box.addEventListener( 'click', function ( )
            {
            document.getElementById('scene1').setAttribute('visible', 'false')
            document.getElementById('stickers').setAttribute('visible', 'true')
            } );

            //show menu
            var menutoggle = document.querySelector( '#menuIcon' );
            menutoggle.addEventListener( 'click', function ( )
            {
                // if (document.getElementById('scene1').getAttribute('visible') == 'false'){
                //     document.getElementById('scene1').setAttribute('visible', 'true')
                // }else{
                //     document.getElementById('scene1').setAttribute('visible', 'false')
                // }
            document.getElementById('scene1').setAttribute('visible', 'true')
            } );

            //close stickermenu
            var closesticker = document.querySelector( '#closemenu' );
            closesticker.addEventListener( 'click', function ( )
            {
            document.getElementById('scene1').setAttribute('visible', 'false')
            document.getElementById('stickers').setAttribute('visible', 'false')
            } );


            function showDiv() {
                document.getElementById('stats').style.display = "block";
            }
        </script>
    </body>
</html>